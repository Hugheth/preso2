 
 PureCSSMatrix=function(){function g(a){return Number(a).toFixed(6)}function f(a){return a.match(b)}function e(b){var c=parseFloat(f(b));if(b.match(a)){c=2*Math.PI*c/360}return c}function d(a){if(a&&a!==null&&a!="none"){if(a instanceof Matrix){this.setMatrix(a)}else{this.setMatrixValue(a)}}else{this.m=Matrix.I(3)}}"use strict";var a=/deg$/;var b=/([0-9.\-e]+)/g;var c=/([a-zA-Z]+)\(([^\)]+)\)/g;d.prototype.setMatrix=function(a){this.m=a};d.prototype.setMatrixValue=function(a){var b=Matrix.I(3);var d;while((d=c.exec(a))!==null){var g=d[1].toLowerCase();var h=d[2].split(",");var i;if(g=="matrix"){i=$M([[parseFloat(h[0]),parseFloat(h[2]),parseFloat(f(h[4]))],[parseFloat(h[1]),parseFloat(h[3]),parseFloat(f(h[5]))],[0,0,1]])}else if(g=="translate"){i=Matrix.I(3);i.elements[0][2]=parseFloat(f(h[0]));i.elements[1][2]=parseFloat(f(h[1]))}else if(g=="scale"){var j=parseFloat(h[0]);var k;if(h.length>1){k=parseFloat(h[1])}else{k=j}i=$M([[j,0,0],[0,k,0],[0,0,1]])}else if(g=="rotate"){i=Matrix.RotationZ(e(h[0]))}else if(g=="skew"||g=="skewx"){i=Matrix.I(3);i.elements[0][1]=Math.tan(e(h[0]))}else if(g=="skewy"){i=Matrix.I(3);i.elements[1][0]=Math.tan(e(h[0]))}else{console.log("Problem with setMatrixValue",g,h)}b=b.multiply(i)}this.m=b};d.prototype.multiply=function(a){return new d(this.m.multiply(a.m))};d.prototype.inverse=function(){return new d(this.m.inverse())};d.prototype.translate=function(a,b){var c=Matrix.I(3);c.elements[0][2]=a;c.elements[1][2]=b;return new d(this.m.multiply(c))};d.prototype.scale=function(a,b){var c=$M([[a,0,0],[0,b,0],[0,0,1]]);return new d(this.m.multiply(c))};d.prototype.rotate=function(a){var b=Matrix.RotationZ(a);return new d(this.m.multiply(b))};d.prototype.toString=function(){var a=this.m.elements;var b="";if($.browser.mozilla||$.browser.opera){b="px"}return"matrix("+g(a[0][0])+", "+g(a[1][0])+", "+g(a[0][1])+", "+g(a[1][1])+", "+g(a[0][2])+b+", "+g(a[1][2])+b+")"};return d}();eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}))(function(a){function x(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function w(a){return a.match(e)}function v(a,b){b=Math.abs(parseInt(b,10))||0;var c=Math.pow(10,b);return Math.round(a*c)/c}function u(a,b,c){var d={};for(var e in a){if(a.hasOwnProperty(e)){d[e]=a[e]+(b[e]-a[e])*c}}return d}function t(a,b){if(Math.abs(a.r-b.r)>Math.PI){if(b.r<a.r){while(Math.abs(a.r-b.r)>Math.PI){b.r+=2*Math.PI}}else{while(Math.abs(a.r-b.r)>Math.PI){b.r-=2*Math.PI}}}return b}function s(a){var b=0;var c;while((c=f.exec(a))!==null){var d=c[1].toLowerCase();var e=c[2].split(",");if(d=="matrix"){var h=$M([[parseFloat(e[0]),parseFloat(e[2]),parseFloat(w(e[4]))],[parseFloat(e[1]),parseFloat(e[3]),parseFloat(w(e[5]))],[0,0,1]]);b+=k(h).r}else if(d=="rotate"){var i=e[0];var j=parseFloat(w(i));if(i.match(g)){j=2*Math.PI*j/360}b+=j}}return b}function r(a){var c=x(a);var d;if(!c){d=new b}else{d=new b(c)}var e=k(d);e.r=s(c);return e}function q(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function p(a,b,c,d,e,f){function r(a,b){function i(a){if(a>=0){return a}else{return 0-a}}var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=m(e)-a;if(i(f)<b){return e}g=o(e);if(i(g)<1e-6){break}e=e-f/g}c=0;d=1;e=a;if(e<c){return c}if(e>d){return d}while(c<d){f=m(e);if(i(f-a)<b){return e}if(a>f){c=e}else{d=e}e=(d-c)*.5+c}return e}function q(a,b){return n(r(a,b))}function p(a){return 1/(200*a)}function o(a){return(3*g*a+2*h)*a+i}function n(a){return((j*a+k)*a+l)*a}function m(a){return((g*a+h)*a+i)*a}var g=0,h=0,i=0,j=0,k=0,l=0;i=3*b;h=3*(d-b)-i;g=1-i-h;l=3*c;k=3*(e-c)-l;j=1-l-k;return q(a,p(f))}function o(a,b,c,d,e){var f,g,h=(1-a)*(1-a)*(1-a);f=b*3*a*a*(1-a)+d*3*a*(1-a)*(1-a)+h;g=c*3*a*a*(1-a)+e*3*a*(1-a)*(1-a)+h;return{x:Math.abs(f),y:Math.abs(g)}}function n(a,b){var c=[];if(a instanceof Array){c=a}else{switch(a){case"linear":c=[0,0,1,1];break;case"ease":c=[.25,.1,.25,1];break;case"ease-in":c=[.42,0,1,1];break;case"ease-out":c=[0,0,.58,1];break;case"ease-in-out":c=[.42,0,.58,1];break}}var d=function(a){return p(a,c[0],c[1],c[2],c[3],b)};return d}function m(a){if(a instanceof Array){return"cubic-bezier("+v(a[0],6)+","+v(a[1],6)+","+v(a[2],6)+","+v(a[3],6)+")"}else{return a}}function l(a){var b="translate("+v(a.tx,6)+"px,"+v(a.ty,6)+"px) ";b+="rotate("+v(a.r,6)+"rad) skewX("+v(a.k,6)+"rad) ";b+="scale("+v(a.sx,6)+","+v(a.sy,6)+")";return b}function k(a){var b=q(a);var c=b.a,d=b.b,e=b.c,f=b.d,g=b.e,h=b.f;if(Math.abs(c*f-d*e)<.01){console.log("fail!");return}var i=g,j=h;var k=Math.sqrt(c*c+d*d);c=c/k;d=d/k;var l=c*e+d*f;e-=c*l;f-=d*l;var m=Math.sqrt(e*e+f*f);e=e/m;f=f/m;l=l/m;if(c*f-d*e<0){c=-c;d=-d;e=-e;f=-f;k=-k;m=-m}var n=Math.atan2(d,c);return{tx:i,ty:j,r:n,k:Math.atan(l),sx:k,sy:m}}function j(a,b,e){var f=(new Date).getTime()-c;var g;if(e.easingfunction){g=e.easingfunction(f/e.duration)}else{g=f/e.duration}if(f>e.duration){clearInterval(d);d=null;g=1}e.root.css(h(l(u(a,b,g))))}function i(a,e,f){if(!a){a=k(new b)}c=(new Date).getTime();if(d){clearInterval(d);d=null}if(f.easing){f.easingfunction=n(f.easing,f.duration)}d=setInterval(function(){j(a,e,f)},1)}function h(a,b,c,d){var e=v(b/1e3,6)+"s";var f=m(c);var g={};g["-ms-transform"]=a;g["-webkit-transform"]=a;g["-moz-transform"]=a;g["-o-transform"]=a;g["transform"]=a;if(b){g["-webkit-transition-duration"]=e;g["-o-transition-duration"]=e}if(c){g["-webkit-transition-timing-function"]=f;g["-o-transition-timing-function"]=f}return g}"use strict";var b;var c;var d;var e=/([0-9.\-e]+)/g;var f=/([a-z]+)\(([^\)]+)\)/g;var g=/deg$/;jQuery.cssHooks["MsTransform"]={set:function(a,b){a.style.msTransform=b}};jQuery.cssHooks["MsTransformOrigin"]={set:function(a,b){a.style.msTransformOrigin=b}};a.fn.animateTransformation=function(c,d,e){b=e;this.each(function(){var b=a(this);var e=r(b);var f=k(c);f=t(e,f);if(a.browser.webkit&&d.nativeanimation){d.root.css(h(l(f),d.duration,d.easing))}else{i(e,f,d)}})}})(jQuery);(function(a){function p(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function o(a){return Number(a).toFixed(6)}function n(a){var c=p(a);if(!c){return new b}else{return new b(c)}}function m(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function l(a,c){var d=a[0];if(!d||!d.ownerDocument){return null}var e=new b;var f;if(d===d.ownerDocument.body){var g=jQuery.offset.bodyOffset(d);f=new b;f=f.translate(g.left,g.top);e=e.multiply(f);return e}jQuery.offset.initialize();var h=d.offsetParent;var i=d.ownerDocument;var j;var k=i.documentElement;var l=i.body;var m=c[0];var o=i.defaultView;var p;if(o){p=o.getComputedStyle(d,null)}else{p=d.currentStyle}var q=d.offsetTop;var r=d.offsetLeft;var s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e);while((d=d.parentNode)&&d!==l&&d!==k&&d!==m){q=0;r=0;if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){break}j=o?o.getComputedStyle(d,null):d.currentStyle;q-=d.scrollTop;r-=d.scrollLeft;if(d===h){q+=d.offsetTop;r+=d.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(d.nodeName))){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}h=d.offsetParent}if(jQuery.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}p=j;s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e)}q=0;r=0;if(p.position==="relative"||p.position==="static"){q+=l.offsetTop;r+=l.offsetLeft}if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){q+=Math.max(k.scrollTop,l.scrollTop);r+=Math.max(k.scrollLeft,l.scrollLeft)}var t=(new b).translate(r,q);e=e.multiply(t);return e}function k(b){var c='<div class="debuglabel" style="left:'+b[0]+"px;top:"+b[1]+'px;"></div>';a("#debug").append(c)}function j(a,b){var c=l(a,b.root);var d=m(c);k(i(d,0,0));k(i(d,0,a.outerHeight()));k(i(d,a.outerWidth(),a.outerHeight()));k(i(d,a.outerWidth(),0))}function i(a,b,c){return[a.a*b+a.c*c+a.e,a.b*b+a.d*c+a.f]}function h(c,d,e){var f=e.targetsize;var g=e.scalemode;var h=e.root;var i=a(h).width();var j=a(h).height();var k=i/c.outerWidth();var l=j/c.outerHeight();var m;if(g=="width"){m=f*k}else if(g=="height"){m=f*l}else if(g=="both"){m=f*Math.min(k,l)}else{console.log("wrong zoommode");return}var n=(i-c.outerWidth()*m)/2;var p=(j-c.outerHeight()*m)/2;var q=i/2;var r=j/2;var s=o(q)+"px "+o(r)+"px";h.css("-ms-transform-origin",s);h.css("-webkit-transform-origin",s);h.css("-o-transform-origin",s);h.css("-moz-transform-origin",s);var t=new b;t=t.translate(-q,-r);t=t.translate(n,p);t=t.scale(m,m);if(d){t=t.multiply(d)}t=t.translate(q,r);return t}function g(b,c){var d=c.root;var e;if(d[0]===document.body){e=a("html")}else{e=d}if(b[0]===d[0]){e.removeClass("noScroll")}else if(!e.hasClass("noScroll")){var f=d.scrollTop();var g=d.scrollLeft();var b=d;if(!f){f=e.scrollTop();g=e.scrollLeft();b=e}e.addClass("noScroll");d.scrollTop(0);d.scrollLeft(0);var h="translate(-"+g+"px,-"+f+"px)";d.css("-ms-transform",h);d.css("-webkit-transform",h);d.css("-moz-transform",h);d.css("-o-transform",h)}}function f(c,d){g(c,d);if(c[0]===d.root[0]){a(d.root).animateTransformation(new b,d,b)}else{var e=l(c,d.root);var f=e?e.inverse():null;var i=h(c,f,d);a(d.root).animateTransformation(i,d,b)}}function e(a){return PureCSSMatrix}function d(){return{targetsize:.9,scalemode:"both",duration:1e3,easing:"ease",root:a(document.body),nativeanimation:false}}"use strict";var b;var c;a.zoomMooz={};a.zoomMooz.setup=function(a){c=jQuery.extend(d(),a);b=e(c)};a.fn.debug=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);if(a("#debug").length===0){a(b.root).append('<div id="debug"><div>')}else{a("#debug").html("")}this.each(function(){if(a(this)[0]!=b.root[0]){j(a(this),b)}})};a.fn.zoomTo=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);this.each(function(){f(a(this),b)});return this}})(jQuery);(function(a){a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()})};a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()});a("body").bind("mousedown",function(a){a.preventDefault()})};a.touche.touchStartBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;a("body").trigger("tracestart-"+e.id)}};a.touche.touchMoveBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.x=d.pageX;e.y=d.pageY;e.max_dx=Math.max(d.pageX-e.sx,e.dx);e.max_dy=Math.max(d.pageY-e.sy,e.dy);e.dx=d.pageX-e.sx;e.dy=d.pageY-e.sy;e.currentEvent=b;e.currentTouch=d;a("body").trigger("tracemove-"+e.id)}};a.touche.touchEndBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.currentEvent=b;e.currentTouch=d;a("body").trigger("traceend-"+e.id);if(e.max_dx==0&&e.max_dy==0)a("body").trigger("traceclick-"+e.id);a.touche.removeTrace(e)}};a.touche.mouseDownBody=function(b){if(b.button!=0)return;var c=a.touche.traces[-1];if(!c)return;a("body").bind("mousemove",a.touche.mouseMoveBody);a("body").bind("mouseup",a.touche.mouseUpBody);a("body").trigger("tracestart--1")};a.touche.mouseMoveBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.x=b.pageX;c.y=b.pageY;c.max_dx=Math.max(b.pageX-c.sx,c.dx);c.max_dy=Math.max(b.pageY-c.sy,c.dy);c.dx=b.pageX-c.sx;c.dy=b.pageY-c.sy;c.currentEvent=b;c.currentTouch=null;a("body").trigger("tracemove--1")};a.touche.mouseUpBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.currentEvent=b;c.currentTouch=null;a("body").trigger("traceend--1");a.touche.removeTrace(c);if(c.max_dx==0&&c.max_dy==0)a("body").trigger("traceclick--1");a("body").unbind("mousemove",a.touche.mouseMoveBody);a("body").unbind("mouseup",a.touche.mouseUpBody)};a.touche.init=function(){a("body").bind("mousedown",a.touche.mouseDownBody);a("body").bind("touchstart",a.touche.touchStartBody);a("body").bind("touchmove",a.touche.touchMoveBody);a("body").bind("touchend",a.touche.touchEndBody)};a(a.touche.init);a.touche.applyTraceToElement=function(b,c,d){var e=function(){var a=false;for(var e in d.traces){if(d.traces[e].id==b.id){a=true;break}}if(!a){if(d.traces.length)d.after.apply(c,[d]);d.traces.push(b);d.count++}d.start.apply(c,[d,b]);if(!a)d.before.apply(c,[d])};var f=function(){d.move.apply(c,[d,b])};var g=function(){var i=false;for(var j in d.traces){if(d.traces[j].id==b.id){d.after.apply(c,[d]);i=true;var k=d.traces.splice(j,1)[0];d.count--;break}}d.end.apply(c,[d,b]);if(d.traces.length&&i)d.before.apply(c,[d]);a("body").unbind("tracestart-"+b.id,e);a("body").unbind("tracemove-"+b.id,f);a("body").unbind("traceend-"+b.id,g);setTimeout(function(){a("body").unbind("traceclick-"+b.id,h)},0)};var h=function(){d.click.apply(c,[d,b])};a("body").bind("tracestart-"+b.id,e);a("body").bind("tracemove-"+b.id,f);a("body").bind("traceend-"+b.id,g);a("body").bind("traceclick-"+b.id,h)};a.touche.touchStartElement=function(b){var c=a(this);var d=b.data;for(var e=0;e<b.originalEvent.changedTouches.length;e++){var f=b.originalEvent.changedTouches[e];var g=a.touche.traces[f.identifier];if(!g){g={id:f.identifier,sx:f.pageX,sy:f.pageY,x:f.pageX,y:f.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:f,target:b.currentTarget};a.touche.addTrace(g)}else{if(!g.visible)continue}a.touche.applyTraceToElement(g,c,d)}};a.touche.mouseDownElement=function(b){if(b.button!=0)return;var c=a(this);var d=b.data;var e=a.touche.traces[-1];if(!e){e={id:-1,sx:b.pageX,sy:b.pageY,x:b.pageX,y:b.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:null,target:b.currentTarget};a.touche.addTrace(e)}else{if(!e.visible)return}a.touche.applyTraceToElement(e,c,d)};a.fn.touche=function(b){this.each(function(){if(b.clone)b=a.extend(true,{},b)});for(var c in a.touche.options)if(!b[c])b[c]=a.touche.options[c];this.bind("touchstart",b,a.touche.touchStartElement);this.bind("mousedown",b,a.touche.mouseDownElement);return this};a.touche.options={traces:[],count:0,start:a.noop,end:a.noop,click:a.noop,move:a.noop,after:a.noop,before:a.noop,propagate:true,clone:true}})(jQuery);var APP_PATH="/present";var RESERVED_TITLES=["cecily","chrjs-store.js","chrjs.js","jquery.min.js"];(function(a){window.cecily={display:null,bag:null,host:null,store:null,map:null,mapData:null,zooming:false,scale:1,zoomTrace:[],currentTiddler:null,defaultTiddlers:[],defaultWidth:260};cecily.init=function(){cecily.display=a("#display");cecily.store=new tiddlyweb.Store;cecily.store.retrieveCached();cecily.bag=document.location.host.split(".")[0]+"_public";cecily.host=document.location.protocol+"//"+document.location.host;cecily.setMap("MyMap",function(b){if(!b)cecily.mapData={};cecily.loadTiddler("DefaultTiddlers",function(c){var d=0;var e=a(c.render).find("a").each(function(){var c=cecily.tiddlerFromAnchor(a(this));if(!b){cecily.mapData[c]=[d*50+2500,d*50+2500,260,500];d++}if(c){cecily.defaultTiddlers.push(c);cecily.showTiddler(c)}})})});a.touche.preventDefaults();a("#display").touche({loldisplay:true,before:cecily.displayBeforeAction,after:cecily.displayAfterAction,move:cecily.displayMove,click:cecily.displayClick})};a(cecily.init);cecily.displayBeforeAction=function(a){a.cssX=parseFloat(cecily.display.attr("tx"))||0;a.cssY=parseFloat(cecily.display.attr("ty"))||0;if(a.count==1){a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy}if(a.count==2){a.scale=Math.pow(Math.pow(a.traces[0].x-a.traces[1].x,2)+Math.pow(a.traces[0].y-a.traces[1].y,2),.5);a.midpointX=(a.traces[0].x+a.traces[1].x)/2;a.midpointY=(a.traces[0].y+a.traces[1].y)/2}a.tx=a.cssX;a.ty=a.cssY};cecily.displayAfterAction=function(a){cecily.updateDisplayMatrix()};cecily.displayMove=function(b,c){cecily.currentTiddler=null;if(b.count==1){b.tx=b.cssX+c.dx-b.offsetX;b.ty=b.cssY+c.dy-b.offsetY;a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}else if(b.count==2){b.sFactor=Math.pow(Math.pow(b.traces[0].x-b.traces[1].x,2)+Math.pow(b.traces[0].y-b.traces[1].y,2),.5)/b.scale*cecily.scale;var d=(b.traces[0].x+b.traces[1].x)/2;var e=(b.traces[0].y+b.traces[1].y)/2;b.tx=b.cssX+(d-b.midpointX);b.ty=b.cssY+(e-b.midpointY);a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-webkit-transition":"","-moz-transition":"",transition:""})}};cecily.displayClick=function(){cecily.zoomToTiddler(false)};cecily.setMap=function(a,b){cecily.loadTiddler(a,function(c){if(!c){b(false);return}cecily.map=a;cecily.mapData={};var d=c.text.split("\n");for(var e in d){var f=d[e].split(" ");var g=f.shift();cecily.mapData[g]=f}b(true)})};cecily.loadTiddler=function(a,b){var c=new tiddlyweb.Tiddler(a);c.bag=new tiddlyweb.Bag(cecily.bag,cecily.host);cecily.store.get(c,function(a,c,d){if(a){b(a)}else{b(false)}},true)};cecily.showTiddler=function(b,c){c=c||a.noop;if(a("#tiddler"+b).length){c(true);return}cecily.loadTiddler(b,function(d){if(!d){c(false);return}var e=a('<div class="tiddler" id="tiddler'+d.title+'" tiddler="'+d.title+'"></div>');var f=a(".tiddler").length;var g=cecily.mapData[b]?cecily.mapData[b][0]:Math.random()*4700;var h=cecily.mapData[b]?cecily.mapData[b][1]:Math.random()*4e3;var i=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;e.css({"-webkit-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")","-moz-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")",transform:"translatex("+g+"px) translatey("+h+"px) scale("+i+")",zIndex:f,display:"none"});e.attr("tx",g);e.attr("ty",h);var j=a('<div class="toolbarLink close" style="float:right">close</div>');j.touche({click:function(){cecily.hideTiddler(b)},stopPropagation:true});var k=a("<h1/>");k.append(d.title);var l=a('<div class="heading"></div>');l.append(j);l.append(k);k.touche({lolwut:true,before:function(a){if(a.count==1){var b=this.parent().parent().attr("tiddler");a.cssX=parseFloat(this.parent().parent().attr("tx"))||0;a.cssY=parseFloat(this.parent().parent().attr("ty"))||0;a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy;a.scale=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;cecily.pushTiddlerToFront(b)}},after:function(a){if(a.count==1){this.parent().parent().attr("tx",a.tx);this.parent().parent().attr("ty",a.ty)}},move:function(a,b){if(a.count==1){a.tx=a.cssX+b.dx/cecily.scale-a.offsetX;a.ty=a.cssY+b.dy/cecily.scale-a.offsetY;this.parent().parent().css({"-webkit-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")","-moz-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transform:"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}},click:function(){if(e.children(".content:visible").length){e.children(".content").slideUp(200);e.find(".toolbarLink").fadeOut(200)}else{e.children(".content").slideDown(200);e.find(".toolbarLink").fadeIn(200)}},propagate:false});e.append(l);var m=a('<div class="content"></div>');m.append(d.render);e.append(m);m.touche({lolwow:true,click:function(a){cecily.zoomToTiddler(e.attr("tiddler"))},propagate:false});cecily.display.append(e);cecily.makeTiddlerInteractive(b);e.fadeIn(200);setTimeout(function(){e.attr("th",e.height());e.attr("tw",e.width());c(true)})})};cecily.hideTiddler=function(b){var c=a("#tiddler"+b);c.fadeOut(200);setTimeout(function(){c.remove()},200);cecily.assignZOrder()};cecily.pushTiddlerToFront=function(b){var c=a("#tiddler"+b);if(!c.length)return;var d=c.css("z-index");var e=a(".tiddler");e.each(function(){if(a(this).css("z-index")>d)a(this).css("z-index",a(this).css("z-index")-1)});c.css("z-index",e.length)};cecily.assignZOrder=function(){var b,c={};a(".tiddler").each(function(){c[a(this).css("z-index")]=a(this)});var d=[];for(b in c)d.sort();var e=1;for(b in d){c[d[b]].css("z-index",e);e++}};cecily.makeTiddlerInteractive=function(b){var c=a("#tiddler"+b);c.find("a.externalLink").not("cecily").addClass("cecily").touche({click:function(){var a=cecily.tiddlerFromAnchor(this);if(!a)return;cecily.showTiddler(a,function(b){if(b)cecily.zoomToTiddler(a)})},propagate:false}).click(function(a){a.preventDefault()})};cecily.tiddlerFromAnchor=function(a){var b=a.attr("href");if(b.split("/").length==1)return b;if(b.substring(0,cecily.host.length)!=cecily.host)return false;var c=b.substring(cecily.host.length);c=c.split("/");c=c[c.length-1];return c};cecily.zoomToTiddler=function(b){if(cecily.zooming)return;cecily.zooming=true;setTimeout(function(){cecily.updateDisplayMatrix();cecily.zooming=false},1010);if(!b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(a(".tiddler"));c.css(d).css("position","absolute");cecily.display.append(c);c.zoomTo({targetsize:.9,nativeanimation:true,duration:500});setTimeout(function(){c.remove();cecily.zooming=false},500);cecily.currentTiddler=null;return}cecily.zoomTrace.push(b);var e=a("#tiddler"+b);var f=false;if(!e.children(".content:visible").length){f=true;e.children(".content").css("opacity",0).show();e.find(".toolbarLink").fadeIn(200)}if(cecily.currentTiddler&&cecily.currentTiddler!=b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(e.add("#tiddler"+cecily.currentTiddler));c.css(d).css("position","absolute");a("#display").append(c);c.zoomTo({targetsize:1,duration:500,easing:"ease-out",nativeanimation:true});setTimeout(function(){e.zoomTo({targetsize:.9,duration:500,easing:"ease-in",nativeanimation:true});c.remove()},500)}else{e.zoomTo({targetsize:.9,duration:500,easing:"ease-out",nativeanimation:true})}cecily.currentTiddler=b;if(f)e.children(".content").hide().css("opacity",1).slideDown(200);cecily.pushTiddlerToFront(b)};cecily.updateDisplayMatrix=function(){var b=a("body");var c=b.css("-webkit-transform")||b.css("-moz-transform")||b.css("transform");if(c.substring(0,6)!="matrix"){return}c=c.substring(7);c=c.substring(0,c.length-1);c=c.split(",");cecily.display.attr("tx",parseFloat(c[4]),10);cecily.display.attr("ty",parseFloat(c[5]),10);cecily.scale=parseFloat(c[3],10)};cecily.boundsForTiddlers=function(b){var c=parseFloat(b.eq(0).attr("tx")),d=parseFloat(b.eq(0).attr("ty"));var e=c+parseFloat(b.eq(0).attr("tw")),f=d+parseFloat(b.eq(0).attr("th"));b=b.filter(":gt(0)");b.each(function(){var b=a(this);c=Math.min(b.attr("tx"),c);d=Math.min(b.attr("ty"),d);e=Math.max(parseFloat(b.attr("tx"))+parseFloat(b.attr("tw")),e);f=Math.max(parseFloat(b.attr("ty"))+parseFloat(b.attr("th")),f)});return{left:c,top:d,width:e-c,height:f-d}}})(jQuery)PureCSSMatrix=function(){function g(a){return Number(a).toFixed(6)}function f(a){return a.match(b)}function e(b){var c=parseFloat(f(b));if(b.match(a)){c=2*Math.PI*c/360}return c}function d(a){if(a&&a!==null&&a!="none"){if(a instanceof Matrix){this.setMatrix(a)}else{this.setMatrixValue(a)}}else{this.m=Matrix.I(3)}}"use strict";var a=/deg$/;var b=/([0-9.\-e]+)/g;var c=/([a-zA-Z]+)\(([^\)]+)\)/g;d.prototype.setMatrix=function(a){this.m=a};d.prototype.setMatrixValue=function(a){var b=Matrix.I(3);var d;while((d=c.exec(a))!==null){var g=d[1].toLowerCase();var h=d[2].split(",");var i;if(g=="matrix"){i=$M([[parseFloat(h[0]),parseFloat(h[2]),parseFloat(f(h[4]))],[parseFloat(h[1]),parseFloat(h[3]),parseFloat(f(h[5]))],[0,0,1]])}else if(g=="translate"){i=Matrix.I(3);i.elements[0][2]=parseFloat(f(h[0]));i.elements[1][2]=parseFloat(f(h[1]))}else if(g=="scale"){var j=parseFloat(h[0]);var k;if(h.length>1){k=parseFloat(h[1])}else{k=j}i=$M([[j,0,0],[0,k,0],[0,0,1]])}else if(g=="rotate"){i=Matrix.RotationZ(e(h[0]))}else if(g=="skew"||g=="skewx"){i=Matrix.I(3);i.elements[0][1]=Math.tan(e(h[0]))}else if(g=="skewy"){i=Matrix.I(3);i.elements[1][0]=Math.tan(e(h[0]))}else{console.log("Problem with setMatrixValue",g,h)}b=b.multiply(i)}this.m=b};d.prototype.multiply=function(a){return new d(this.m.multiply(a.m))};d.prototype.inverse=function(){return new d(this.m.inverse())};d.prototype.translate=function(a,b){var c=Matrix.I(3);c.elements[0][2]=a;c.elements[1][2]=b;return new d(this.m.multiply(c))};d.prototype.scale=function(a,b){var c=$M([[a,0,0],[0,b,0],[0,0,1]]);return new d(this.m.multiply(c))};d.prototype.rotate=function(a){var b=Matrix.RotationZ(a);return new d(this.m.multiply(b))};d.prototype.toString=function(){var a=this.m.elements;var b="";if($.browser.mozilla||$.browser.opera){b="px"}return"matrix("+g(a[0][0])+", "+g(a[1][0])+", "+g(a[0][1])+", "+g(a[1][1])+", "+g(a[0][2])+b+", "+g(a[1][2])+b+")"};return d}();eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}))(function(a){function x(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function w(a){return a.match(e)}function v(a,b){b=Math.abs(parseInt(b,10))||0;var c=Math.pow(10,b);return Math.round(a*c)/c}function u(a,b,c){var d={};for(var e in a){if(a.hasOwnProperty(e)){d[e]=a[e]+(b[e]-a[e])*c}}return d}function t(a,b){if(Math.abs(a.r-b.r)>Math.PI){if(b.r<a.r){while(Math.abs(a.r-b.r)>Math.PI){b.r+=2*Math.PI}}else{while(Math.abs(a.r-b.r)>Math.PI){b.r-=2*Math.PI}}}return b}function s(a){var b=0;var c;while((c=f.exec(a))!==null){var d=c[1].toLowerCase();var e=c[2].split(",");if(d=="matrix"){var h=$M([[parseFloat(e[0]),parseFloat(e[2]),parseFloat(w(e[4]))],[parseFloat(e[1]),parseFloat(e[3]),parseFloat(w(e[5]))],[0,0,1]]);b+=k(h).r}else if(d=="rotate"){var i=e[0];var j=parseFloat(w(i));if(i.match(g)){j=2*Math.PI*j/360}b+=j}}return b}function r(a){var c=x(a);var d;if(!c){d=new b}else{d=new b(c)}var e=k(d);e.r=s(c);return e}function q(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function p(a,b,c,d,e,f){function r(a,b){function i(a){if(a>=0){return a}else{return 0-a}}var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=m(e)-a;if(i(f)<b){return e}g=o(e);if(i(g)<1e-6){break}e=e-f/g}c=0;d=1;e=a;if(e<c){return c}if(e>d){return d}while(c<d){f=m(e);if(i(f-a)<b){return e}if(a>f){c=e}else{d=e}e=(d-c)*.5+c}return e}function q(a,b){return n(r(a,b))}function p(a){return 1/(200*a)}function o(a){return(3*g*a+2*h)*a+i}function n(a){return((j*a+k)*a+l)*a}function m(a){return((g*a+h)*a+i)*a}var g=0,h=0,i=0,j=0,k=0,l=0;i=3*b;h=3*(d-b)-i;g=1-i-h;l=3*c;k=3*(e-c)-l;j=1-l-k;return q(a,p(f))}function o(a,b,c,d,e){var f,g,h=(1-a)*(1-a)*(1-a);f=b*3*a*a*(1-a)+d*3*a*(1-a)*(1-a)+h;g=c*3*a*a*(1-a)+e*3*a*(1-a)*(1-a)+h;return{x:Math.abs(f),y:Math.abs(g)}}function n(a,b){var c=[];if(a instanceof Array){c=a}else{switch(a){case"linear":c=[0,0,1,1];break;case"ease":c=[.25,.1,.25,1];break;case"ease-in":c=[.42,0,1,1];break;case"ease-out":c=[0,0,.58,1];break;case"ease-in-out":c=[.42,0,.58,1];break}}var d=function(a){return p(a,c[0],c[1],c[2],c[3],b)};return d}function m(a){if(a instanceof Array){return"cubic-bezier("+v(a[0],6)+","+v(a[1],6)+","+v(a[2],6)+","+v(a[3],6)+")"}else{return a}}function l(a){var b="translate("+v(a.tx,6)+"px,"+v(a.ty,6)+"px) ";b+="rotate("+v(a.r,6)+"rad) skewX("+v(a.k,6)+"rad) ";b+="scale("+v(a.sx,6)+","+v(a.sy,6)+")";return b}function k(a){var b=q(a);var c=b.a,d=b.b,e=b.c,f=b.d,g=b.e,h=b.f;if(Math.abs(c*f-d*e)<.01){console.log("fail!");return}var i=g,j=h;var k=Math.sqrt(c*c+d*d);c=c/k;d=d/k;var l=c*e+d*f;e-=c*l;f-=d*l;var m=Math.sqrt(e*e+f*f);e=e/m;f=f/m;l=l/m;if(c*f-d*e<0){c=-c;d=-d;e=-e;f=-f;k=-k;m=-m}var n=Math.atan2(d,c);return{tx:i,ty:j,r:n,k:Math.atan(l),sx:k,sy:m}}function j(a,b,e){var f=(new Date).getTime()-c;var g;if(e.easingfunction){g=e.easingfunction(f/e.duration)}else{g=f/e.duration}if(f>e.duration){clearInterval(d);d=null;g=1}e.root.css(h(l(u(a,b,g))))}function i(a,e,f){if(!a){a=k(new b)}c=(new Date).getTime();if(d){clearInterval(d);d=null}if(f.easing){f.easingfunction=n(f.easing,f.duration)}d=setInterval(function(){j(a,e,f)},1)}function h(a,b,c,d){var e=v(b/1e3,6)+"s";var f=m(c);var g={};g["-ms-transform"]=a;g["-webkit-transform"]=a;g["-moz-transform"]=a;g["-o-transform"]=a;g["transform"]=a;if(b){g["-webkit-transition-duration"]=e;g["-o-transition-duration"]=e}if(c){g["-webkit-transition-timing-function"]=f;g["-o-transition-timing-function"]=f}return g}"use strict";var b;var c;var d;var e=/([0-9.\-e]+)/g;var f=/([a-z]+)\(([^\)]+)\)/g;var g=/deg$/;jQuery.cssHooks["MsTransform"]={set:function(a,b){a.style.msTransform=b}};jQuery.cssHooks["MsTransformOrigin"]={set:function(a,b){a.style.msTransformOrigin=b}};a.fn.animateTransformation=function(c,d,e){b=e;this.each(function(){var b=a(this);var e=r(b);var f=k(c);f=t(e,f);if(a.browser.webkit&&d.nativeanimation){d.root.css(h(l(f),d.duration,d.easing))}else{i(e,f,d)}})}})(jQuery);(function(a){function p(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function o(a){return Number(a).toFixed(6)}function n(a){var c=p(a);if(!c){return new b}else{return new b(c)}}function m(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function l(a,c){var d=a[0];if(!d||!d.ownerDocument){return null}var e=new b;var f;if(d===d.ownerDocument.body){var g=jQuery.offset.bodyOffset(d);f=new b;f=f.translate(g.left,g.top);e=e.multiply(f);return e}jQuery.offset.initialize();var h=d.offsetParent;var i=d.ownerDocument;var j;var k=i.documentElement;var l=i.body;var m=c[0];var o=i.defaultView;var p;if(o){p=o.getComputedStyle(d,null)}else{p=d.currentStyle}var q=d.offsetTop;var r=d.offsetLeft;var s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e);while((d=d.parentNode)&&d!==l&&d!==k&&d!==m){q=0;r=0;if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){break}j=o?o.getComputedStyle(d,null):d.currentStyle;q-=d.scrollTop;r-=d.scrollLeft;if(d===h){q+=d.offsetTop;r+=d.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(d.nodeName))){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}h=d.offsetParent}if(jQuery.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}p=j;s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e)}q=0;r=0;if(p.position==="relative"||p.position==="static"){q+=l.offsetTop;r+=l.offsetLeft}if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){q+=Math.max(k.scrollTop,l.scrollTop);r+=Math.max(k.scrollLeft,l.scrollLeft)}var t=(new b).translate(r,q);e=e.multiply(t);return e}function k(b){var c='<div class="debuglabel" style="left:'+b[0]+"px;top:"+b[1]+'px;"></div>';a("#debug").append(c)}function j(a,b){var c=l(a,b.root);var d=m(c);k(i(d,0,0));k(i(d,0,a.outerHeight()));k(i(d,a.outerWidth(),a.outerHeight()));k(i(d,a.outerWidth(),0))}function i(a,b,c){return[a.a*b+a.c*c+a.e,a.b*b+a.d*c+a.f]}function h(c,d,e){var f=e.targetsize;var g=e.scalemode;var h=e.root;var i=a(h).width();var j=a(h).height();var k=i/c.outerWidth();var l=j/c.outerHeight();var m;if(g=="width"){m=f*k}else if(g=="height"){m=f*l}else if(g=="both"){m=f*Math.min(k,l)}else{console.log("wrong zoommode");return}var n=(i-c.outerWidth()*m)/2;var p=(j-c.outerHeight()*m)/2;var q=i/2;var r=j/2;var s=o(q)+"px "+o(r)+"px";h.css("-ms-transform-origin",s);h.css("-webkit-transform-origin",s);h.css("-o-transform-origin",s);h.css("-moz-transform-origin",s);var t=new b;t=t.translate(-q,-r);t=t.translate(n,p);t=t.scale(m,m);if(d){t=t.multiply(d)}t=t.translate(q,r);return t}function g(b,c){var d=c.root;var e;if(d[0]===document.body){e=a("html")}else{e=d}if(b[0]===d[0]){e.removeClass("noScroll")}else if(!e.hasClass("noScroll")){var f=d.scrollTop();var g=d.scrollLeft();var b=d;if(!f){f=e.scrollTop();g=e.scrollLeft();b=e}e.addClass("noScroll");d.scrollTop(0);d.scrollLeft(0);var h="translate(-"+g+"px,-"+f+"px)";d.css("-ms-transform",h);d.css("-webkit-transform",h);d.css("-moz-transform",h);d.css("-o-transform",h)}}function f(c,d){g(c,d);if(c[0]===d.root[0]){a(d.root).animateTransformation(new b,d,b)}else{var e=l(c,d.root);var f=e?e.inverse():null;var i=h(c,f,d);a(d.root).animateTransformation(i,d,b)}}function e(a){return PureCSSMatrix}function d(){return{targetsize:.9,scalemode:"both",duration:1e3,easing:"ease",root:a(document.body),nativeanimation:false}}"use strict";var b;var c;a.zoomMooz={};a.zoomMooz.setup=function(a){c=jQuery.extend(d(),a);b=e(c)};a.fn.debug=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);if(a("#debug").length===0){a(b.root).append('<div id="debug"><div>')}else{a("#debug").html("")}this.each(function(){if(a(this)[0]!=b.root[0]){j(a(this),b)}})};a.fn.zoomTo=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);this.each(function(){f(a(this),b)});return this}})(jQuery);(function(a){a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()})};a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()});a("body").bind("mousedown",function(a){a.preventDefault()})};a.touche.touchStartBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;a("body").trigger("tracestart-"+e.id)}};a.touche.touchMoveBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.x=d.pageX;e.y=d.pageY;e.max_dx=Math.max(d.pageX-e.sx,e.dx);e.max_dy=Math.max(d.pageY-e.sy,e.dy);e.dx=d.pageX-e.sx;e.dy=d.pageY-e.sy;e.currentEvent=b;e.currentTouch=d;a("body").trigger("tracemove-"+e.id)}};a.touche.touchEndBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.currentEvent=b;e.currentTouch=d;a("body").trigger("traceend-"+e.id);if(e.max_dx==0&&e.max_dy==0)a("body").trigger("traceclick-"+e.id);a.touche.removeTrace(e)}};a.touche.mouseDownBody=function(b){if(b.button!=0)return;var c=a.touche.traces[-1];if(!c)return;a("body").bind("mousemove",a.touche.mouseMoveBody);a("body").bind("mouseup",a.touche.mouseUpBody);a("body").trigger("tracestart--1")};a.touche.mouseMoveBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.x=b.pageX;c.y=b.pageY;c.max_dx=Math.max(b.pageX-c.sx,c.dx);c.max_dy=Math.max(b.pageY-c.sy,c.dy);c.dx=b.pageX-c.sx;c.dy=b.pageY-c.sy;c.currentEvent=b;c.currentTouch=null;a("body").trigger("tracemove--1")};a.touche.mouseUpBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.currentEvent=b;c.currentTouch=null;a("body").trigger("traceend--1");a.touche.removeTrace(c);if(c.max_dx==0&&c.max_dy==0)a("body").trigger("traceclick--1");a("body").unbind("mousemove",a.touche.mouseMoveBody);a("body").unbind("mouseup",a.touche.mouseUpBody)};a.touche.init=function(){a("body").bind("mousedown",a.touche.mouseDownBody);a("body").bind("touchstart",a.touche.touchStartBody);a("body").bind("touchmove",a.touche.touchMoveBody);a("body").bind("touchend",a.touche.touchEndBody)};a(a.touche.init);a.touche.applyTraceToElement=function(b,c,d){var e=function(){var a=false;for(var e in d.traces){if(d.traces[e].id==b.id){a=true;break}}if(!a){if(d.traces.length)d.after.apply(c,[d]);d.traces.push(b);d.count++}d.start.apply(c,[d,b]);if(!a)d.before.apply(c,[d])};var f=function(){d.move.apply(c,[d,b])};var g=function(){var i=false;for(var j in d.traces){if(d.traces[j].id==b.id){d.after.apply(c,[d]);i=true;var k=d.traces.splice(j,1)[0];d.count--;break}}d.end.apply(c,[d,b]);if(d.traces.length&&i)d.before.apply(c,[d]);a("body").unbind("tracestart-"+b.id,e);a("body").unbind("tracemove-"+b.id,f);a("body").unbind("traceend-"+b.id,g);setTimeout(function(){a("body").unbind("traceclick-"+b.id,h)},0)};var h=function(){d.click.apply(c,[d,b])};a("body").bind("tracestart-"+b.id,e);a("body").bind("tracemove-"+b.id,f);a("body").bind("traceend-"+b.id,g);a("body").bind("traceclick-"+b.id,h)};a.touche.touchStartElement=function(b){var c=a(this);var d=b.data;for(var e=0;e<b.originalEvent.changedTouches.length;e++){var f=b.originalEvent.changedTouches[e];var g=a.touche.traces[f.identifier];if(!g){g={id:f.identifier,sx:f.pageX,sy:f.pageY,x:f.pageX,y:f.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:f,target:b.currentTarget};a.touche.addTrace(g)}else{if(!g.visible)continue}a.touche.applyTraceToElement(g,c,d)}};a.touche.mouseDownElement=function(b){if(b.button!=0)return;var c=a(this);var d=b.data;var e=a.touche.traces[-1];if(!e){e={id:-1,sx:b.pageX,sy:b.pageY,x:b.pageX,y:b.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:null,target:b.currentTarget};a.touche.addTrace(e)}else{if(!e.visible)return}a.touche.applyTraceToElement(e,c,d)};a.fn.touche=function(b){this.each(function(){if(b.clone)b=a.extend(true,{},b)});for(var c in a.touche.options)if(!b[c])b[c]=a.touche.options[c];this.bind("touchstart",b,a.touche.touchStartElement);this.bind("mousedown",b,a.touche.mouseDownElement);return this};a.touche.options={traces:[],count:0,start:a.noop,end:a.noop,click:a.noop,move:a.noop,after:a.noop,before:a.noop,propagate:true,clone:true}})(jQuery);var APP_PATH="/present";var RESERVED_TITLES=["cecily","chrjs-store.js","chrjs.js","jquery.min.js"];(function(a){window.cecily={display:null,bag:null,host:null,store:null,map:null,mapData:null,zooming:false,scale:1,zoomTrace:[],currentTiddler:null,defaultTiddlers:[],defaultWidth:260};cecily.init=function(){cecily.display=a("#display");cecily.store=new tiddlyweb.Store;cecily.store.retrieveCached();cecily.bag=document.location.host.split(".")[0]+"_public";cecily.host=document.location.protocol+"//"+document.location.host;cecily.setMap("MyMap",function(b){if(!b)cecily.mapData={};cecily.loadTiddler("DefaultTiddlers",function(c){var d=0;var e=a(c.render).find("a").each(function(){var c=cecily.tiddlerFromAnchor(a(this));if(!b){cecily.mapData[c]=[d*50+2500,d*50+2500,260,500];d++}if(c){cecily.defaultTiddlers.push(c);cecily.showTiddler(c)}})})});a.touche.preventDefaults();a("#display").touche({loldisplay:true,before:cecily.displayBeforeAction,after:cecily.displayAfterAction,move:cecily.displayMove,click:cecily.displayClick})};a(cecily.init);cecily.displayBeforeAction=function(a){a.cssX=parseFloat(cecily.display.attr("tx"))||0;a.cssY=parseFloat(cecily.display.attr("ty"))||0;if(a.count==1){a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy}if(a.count==2){a.scale=Math.pow(Math.pow(a.traces[0].x-a.traces[1].x,2)+Math.pow(a.traces[0].y-a.traces[1].y,2),.5);a.midpointX=(a.traces[0].x+a.traces[1].x)/2;a.midpointY=(a.traces[0].y+a.traces[1].y)/2}a.tx=a.cssX;a.ty=a.cssY};cecily.displayAfterAction=function(a){cecily.updateDisplayMatrix()};cecily.displayMove=function(b,c){cecily.currentTiddler=null;if(b.count==1){b.tx=b.cssX+c.dx-b.offsetX;b.ty=b.cssY+c.dy-b.offsetY;a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}else if(b.count==2){b.sFactor=Math.pow(Math.pow(b.traces[0].x-b.traces[1].x,2)+Math.pow(b.traces[0].y-b.traces[1].y,2),.5)/b.scale*cecily.scale;var d=(b.traces[0].x+b.traces[1].x)/2;var e=(b.traces[0].y+b.traces[1].y)/2;b.tx=b.cssX+(d-b.midpointX);b.ty=b.cssY+(e-b.midpointY);a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-webkit-transition":"","-moz-transition":"",transition:""})}};cecily.displayClick=function(){cecily.zoomToTiddler(false)};cecily.setMap=function(a,b){cecily.loadTiddler(a,function(c){if(!c){b(false);return}cecily.map=a;cecily.mapData={};var d=c.text.split("\n");for(var e in d){var f=d[e].split(" ");var g=f.shift();cecily.mapData[g]=f}b(true)})};cecily.loadTiddler=function(a,b){var c=new tiddlyweb.Tiddler(a);c.bag=new tiddlyweb.Bag(cecily.bag,cecily.host);cecily.store.get(c,function(a,c,d){if(a){b(a)}else{b(false)}},true)};cecily.showTiddler=function(b,c){c=c||a.noop;if(a("#tiddler"+b).length){c(true);return}cecily.loadTiddler(b,function(d){if(!d){c(false);return}var e=a('<div class="tiddler" id="tiddler'+d.title+'" tiddler="'+d.title+'"></div>');var f=a(".tiddler").length;var g=cecily.mapData[b]?cecily.mapData[b][0]:Math.random()*4700;var h=cecily.mapData[b]?cecily.mapData[b][1]:Math.random()*4e3;var i=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;e.css({"-webkit-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")","-moz-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")",transform:"translatex("+g+"px) translatey("+h+"px) scale("+i+")",zIndex:f,display:"none"});e.attr("tx",g);e.attr("ty",h);var j=a('<div class="toolbarLink close" style="float:right">close</div>');j.touche({click:function(){cecily.hideTiddler(b)},stopPropagation:true});var k=a("<h1/>");k.append(d.title);var l=a('<div class="heading"></div>');l.append(j);l.append(k);k.touche({lolwut:true,before:function(a){if(a.count==1){var b=this.parent().parent().attr("tiddler");a.cssX=parseFloat(this.parent().parent().attr("tx"))||0;a.cssY=parseFloat(this.parent().parent().attr("ty"))||0;a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy;a.scale=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;cecily.pushTiddlerToFront(b)}},after:function(a){if(a.count==1){this.parent().parent().attr("tx",a.tx);this.parent().parent().attr("ty",a.ty)}},move:function(a,b){if(a.count==1){a.tx=a.cssX+b.dx/cecily.scale-a.offsetX;a.ty=a.cssY+b.dy/cecily.scale-a.offsetY;this.parent().parent().css({"-webkit-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")","-moz-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transform:"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}},click:function(){if(e.children(".content:visible").length){e.children(".content").slideUp(200);e.find(".toolbarLink").fadeOut(200)}else{e.children(".content").slideDown(200);e.find(".toolbarLink").fadeIn(200)}},propagate:false});e.append(l);var m=a('<div class="content"></div>');m.append(d.render);e.append(m);m.touche({lolwow:true,click:function(a){cecily.zoomToTiddler(e.attr("tiddler"))},propagate:false});cecily.display.append(e);cecily.makeTiddlerInteractive(b);e.fadeIn(200);setTimeout(function(){e.attr("th",e.height());e.attr("tw",e.width());c(true)})})};cecily.hideTiddler=function(b){var c=a("#tiddler"+b);c.fadeOut(200);setTimeout(function(){c.remove()},200);cecily.assignZOrder()};cecily.pushTiddlerToFront=function(b){var c=a("#tiddler"+b);if(!c.length)return;var d=c.css("z-index");var e=a(".tiddler");e.each(function(){if(a(this).css("z-index")>d)a(this).css("z-index",a(this).css("z-index")-1)});c.css("z-index",e.length)};cecily.assignZOrder=function(){var b,c={};a(".tiddler").each(function(){c[a(this).css("z-index")]=a(this)});var d=[];for(b in c)d.sort();var e=1;for(b in d){c[d[b]].css("z-index",e);e++}};cecily.makeTiddlerInteractive=function(b){var c=a("#tiddler"+b);c.find("a.externalLink").not("cecily").addClass("cecily").touche({click:function(){var a=cecily.tiddlerFromAnchor(this);if(!a)return;cecily.showTiddler(a,function(b){if(b)cecily.zoomToTiddler(a)})},propagate:false}).click(function(a){a.preventDefault()})};cecily.tiddlerFromAnchor=function(a){var b=a.attr("href");if(b.split("/").length==1)return b;if(b.substring(0,cecily.host.length)!=cecily.host)return false;var c=b.substring(cecily.host.length);c=c.split("/");c=c[c.length-1];return c};cecily.zoomToTiddler=function(b){if(cecily.zooming)return;cecily.zooming=true;setTimeout(function(){cecily.updateDisplayMatrix();cecily.zooming=false},1010);if(!b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(a(".tiddler"));c.css(d).css("position","absolute");cecily.display.append(c);c.zoomTo({targetsize:.9,nativeanimation:true,duration:500});setTimeout(function(){c.remove();cecily.zooming=false},500);cecily.currentTiddler=null;return}cecily.zoomTrace.push(b);var e=a("#tiddler"+b);var f=false;if(!e.children(".content:visible").length){f=true;e.children(".content").css("opacity",0).show();e.find(".toolbarLink").fadeIn(200)}if(cecily.currentTiddler&&cecily.currentTiddler!=b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(e.add("#tiddler"+cecily.currentTiddler));c.css(d).css("position","absolute");a("#display").append(c);c.zoomTo({targetsize:1,duration:500,easing:"ease-out",nativeanimation:true});setTimeout(function(){e.zoomTo({targetsize:.9,duration:500,easing:"ease-in",nativeanimation:true});c.remove()},500)}else{e.zoomTo({targetsize:.9,duration:500,easing:"ease-out",nativeanimation:true})}cecily.currentTiddler=b;if(f)e.children(".content").hide().css("opacity",1).slideDown(200);cecily.pushTiddlerToFront(b)};cecily.updateDisplayMatrix=function(){var b=a("body");var c=b.css("-webkit-transform")||b.css("-moz-transform")||b.css("transform");if(c.substring(0,6)!="matrix"){return}c=c.substring(7);c=c.substring(0,c.length-1);c=c.split(",");cecily.display.attr("tx",parseFloat(c[4]),10);cecily.display.attr("ty",parseFloat(c[5]),10);cecily.scale=parseFloat(c[3],10)};cecily.boundsForTiddlers=function(b){var c=parseFloat(b.eq(0).attr("tx")),d=parseFloat(b.eq(0).attr("ty"));var e=c+parseFloat(b.eq(0).attr("tw")),f=d+parseFloat(b.eq(0).attr("th"));b=b.filter(":gt(0)");b.each(function(){var b=a(this);c=Math.min(b.attr("tx"),c);d=Math.min(b.attr("ty"),d);e=Math.max(parseFloat(b.attr("tx"))+parseFloat(b.attr("tw")),e);f=Math.max(parseFloat(b.attr("ty"))+parseFloat(b.attr("th")),f)});return{left:c,top:d,width:e-c,height:f-d}}})(jQuery)PureCSSMatrix=function(){function g(a){return Number(a).toFixed(6)}function f(a){return a.match(b)}function e(b){var c=parseFloat(f(b));if(b.match(a)){c=2*Math.PI*c/360}return c}function d(a){if(a&&a!==null&&a!="none"){if(a instanceof Matrix){this.setMatrix(a)}else{this.setMatrixValue(a)}}else{this.m=Matrix.I(3)}}"use strict";var a=/deg$/;var b=/([0-9.\-e]+)/g;var c=/([a-zA-Z]+)\(([^\)]+)\)/g;d.prototype.setMatrix=function(a){this.m=a};d.prototype.setMatrixValue=function(a){var b=Matrix.I(3);var d;while((d=c.exec(a))!==null){var g=d[1].toLowerCase();var h=d[2].split(",");var i;if(g=="matrix"){i=$M([[parseFloat(h[0]),parseFloat(h[2]),parseFloat(f(h[4]))],[parseFloat(h[1]),parseFloat(h[3]),parseFloat(f(h[5]))],[0,0,1]])}else if(g=="translate"){i=Matrix.I(3);i.elements[0][2]=parseFloat(f(h[0]));i.elements[1][2]=parseFloat(f(h[1]))}else if(g=="scale"){var j=parseFloat(h[0]);var k;if(h.length>1){k=parseFloat(h[1])}else{k=j}i=$M([[j,0,0],[0,k,0],[0,0,1]])}else if(g=="rotate"){i=Matrix.RotationZ(e(h[0]))}else if(g=="skew"||g=="skewx"){i=Matrix.I(3);i.elements[0][1]=Math.tan(e(h[0]))}else if(g=="skewy"){i=Matrix.I(3);i.elements[1][0]=Math.tan(e(h[0]))}else{console.log("Problem with setMatrixValue",g,h)}b=b.multiply(i)}this.m=b};d.prototype.multiply=function(a){return new d(this.m.multiply(a.m))};d.prototype.inverse=function(){return new d(this.m.inverse())};d.prototype.translate=function(a,b){var c=Matrix.I(3);c.elements[0][2]=a;c.elements[1][2]=b;return new d(this.m.multiply(c))};d.prototype.scale=function(a,b){var c=$M([[a,0,0],[0,b,0],[0,0,1]]);return new d(this.m.multiply(c))};d.prototype.rotate=function(a){var b=Matrix.RotationZ(a);return new d(this.m.multiply(b))};d.prototype.toString=function(){var a=this.m.elements;var b="";if($.browser.mozilla||$.browser.opera){b="px"}return"matrix("+g(a[0][0])+", "+g(a[1][0])+", "+g(a[0][1])+", "+g(a[1][1])+", "+g(a[0][2])+b+", "+g(a[1][2])+b+")"};return d}();eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}))(function(a){function x(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function w(a){return a.match(e)}function v(a,b){b=Math.abs(parseInt(b,10))||0;var c=Math.pow(10,b);return Math.round(a*c)/c}function u(a,b,c){var d={};for(var e in a){if(a.hasOwnProperty(e)){d[e]=a[e]+(b[e]-a[e])*c}}return d}function t(a,b){if(Math.abs(a.r-b.r)>Math.PI){if(b.r<a.r){while(Math.abs(a.r-b.r)>Math.PI){b.r+=2*Math.PI}}else{while(Math.abs(a.r-b.r)>Math.PI){b.r-=2*Math.PI}}}return b}function s(a){var b=0;var c;while((c=f.exec(a))!==null){var d=c[1].toLowerCase();var e=c[2].split(",");if(d=="matrix"){var h=$M([[parseFloat(e[0]),parseFloat(e[2]),parseFloat(w(e[4]))],[parseFloat(e[1]),parseFloat(e[3]),parseFloat(w(e[5]))],[0,0,1]]);b+=k(h).r}else if(d=="rotate"){var i=e[0];var j=parseFloat(w(i));if(i.match(g)){j=2*Math.PI*j/360}b+=j}}return b}function r(a){var c=x(a);var d;if(!c){d=new b}else{d=new b(c)}var e=k(d);e.r=s(c);return e}function q(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function p(a,b,c,d,e,f){function r(a,b){function i(a){if(a>=0){return a}else{return 0-a}}var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=m(e)-a;if(i(f)<b){return e}g=o(e);if(i(g)<1e-6){break}e=e-f/g}c=0;d=1;e=a;if(e<c){return c}if(e>d){return d}while(c<d){f=m(e);if(i(f-a)<b){return e}if(a>f){c=e}else{d=e}e=(d-c)*.5+c}return e}function q(a,b){return n(r(a,b))}function p(a){return 1/(200*a)}function o(a){return(3*g*a+2*h)*a+i}function n(a){return((j*a+k)*a+l)*a}function m(a){return((g*a+h)*a+i)*a}var g=0,h=0,i=0,j=0,k=0,l=0;i=3*b;h=3*(d-b)-i;g=1-i-h;l=3*c;k=3*(e-c)-l;j=1-l-k;return q(a,p(f))}function o(a,b,c,d,e){var f,g,h=(1-a)*(1-a)*(1-a);f=b*3*a*a*(1-a)+d*3*a*(1-a)*(1-a)+h;g=c*3*a*a*(1-a)+e*3*a*(1-a)*(1-a)+h;return{x:Math.abs(f),y:Math.abs(g)}}function n(a,b){var c=[];if(a instanceof Array){c=a}else{switch(a){case"linear":c=[0,0,1,1];break;case"ease":c=[.25,.1,.25,1];break;case"ease-in":c=[.42,0,1,1];break;case"ease-out":c=[0,0,.58,1];break;case"ease-in-out":c=[.42,0,.58,1];break}}var d=function(a){return p(a,c[0],c[1],c[2],c[3],b)};return d}function m(a){if(a instanceof Array){return"cubic-bezier("+v(a[0],6)+","+v(a[1],6)+","+v(a[2],6)+","+v(a[3],6)+")"}else{return a}}function l(a){var b="translate("+v(a.tx,6)+"px,"+v(a.ty,6)+"px) ";b+="rotate("+v(a.r,6)+"rad) skewX("+v(a.k,6)+"rad) ";b+="scale("+v(a.sx,6)+","+v(a.sy,6)+")";return b}function k(a){var b=q(a);var c=b.a,d=b.b,e=b.c,f=b.d,g=b.e,h=b.f;if(Math.abs(c*f-d*e)<.01){console.log("fail!");return}var i=g,j=h;var k=Math.sqrt(c*c+d*d);c=c/k;d=d/k;var l=c*e+d*f;e-=c*l;f-=d*l;var m=Math.sqrt(e*e+f*f);e=e/m;f=f/m;l=l/m;if(c*f-d*e<0){c=-c;d=-d;e=-e;f=-f;k=-k;m=-m}var n=Math.atan2(d,c);return{tx:i,ty:j,r:n,k:Math.atan(l),sx:k,sy:m}}function j(a,b,e){var f=(new Date).getTime()-c;var g;if(e.easingfunction){g=e.easingfunction(f/e.duration)}else{g=f/e.duration}if(f>e.duration){clearInterval(d);d=null;g=1}e.root.css(h(l(u(a,b,g))))}function i(a,e,f){if(!a){a=k(new b)}c=(new Date).getTime();if(d){clearInterval(d);d=null}if(f.easing){f.easingfunction=n(f.easing,f.duration)}d=setInterval(function(){j(a,e,f)},1)}function h(a,b,c,d){var e=v(b/1e3,6)+"s";var f=m(c);var g={};g["-ms-transform"]=a;g["-webkit-transform"]=a;g["-moz-transform"]=a;g["-o-transform"]=a;g["transform"]=a;if(b){g["-webkit-transition-duration"]=e;g["-o-transition-duration"]=e}if(c){g["-webkit-transition-timing-function"]=f;g["-o-transition-timing-function"]=f}return g}"use strict";var b;var c;var d;var e=/([0-9.\-e]+)/g;var f=/([a-z]+)\(([^\)]+)\)/g;var g=/deg$/;jQuery.cssHooks["MsTransform"]={set:function(a,b){a.style.msTransform=b}};jQuery.cssHooks["MsTransformOrigin"]={set:function(a,b){a.style.msTransformOrigin=b}};a.fn.animateTransformation=function(c,d,e){b=e;this.each(function(){var b=a(this);var e=r(b);var f=k(c);f=t(e,f);if(a.browser.webkit&&d.nativeanimation){d.root.css(h(l(f),d.duration,d.easing))}else{i(e,f,d)}})}})(jQuery);(function(a){function p(b){return a(b).css("-webkit-transform")||a(b).css("-moz-transform")||a(b).css("-o-transform")||a(b).css("-ms-transform")||a(b).css("transform")}function o(a){return Number(a).toFixed(6)}function n(a){var c=p(a);if(!c){return new b}else{return new b(c)}}function m(a){var b;if(a instanceof PureCSSMatrix){b=a.m.elements}else if(a instanceof Matrix){b=a.elements}if(!b){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f}}return{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}}function l(a,c){var d=a[0];if(!d||!d.ownerDocument){return null}var e=new b;var f;if(d===d.ownerDocument.body){var g=jQuery.offset.bodyOffset(d);f=new b;f=f.translate(g.left,g.top);e=e.multiply(f);return e}jQuery.offset.initialize();var h=d.offsetParent;var i=d.ownerDocument;var j;var k=i.documentElement;var l=i.body;var m=c[0];var o=i.defaultView;var p;if(o){p=o.getComputedStyle(d,null)}else{p=d.currentStyle}var q=d.offsetTop;var r=d.offsetLeft;var s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e);while((d=d.parentNode)&&d!==l&&d!==k&&d!==m){q=0;r=0;if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){break}j=o?o.getComputedStyle(d,null):d.currentStyle;q-=d.scrollTop;r-=d.scrollLeft;if(d===h){q+=d.offsetTop;r+=d.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(d.nodeName))){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}h=d.offsetParent}if(jQuery.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){q+=parseFloat(j.borderTopWidth)||0;r+=parseFloat(j.borderLeftWidth)||0}p=j;s=n().translate(r,q);s=s.multiply(n(d));e=s.multiply(e)}q=0;r=0;if(p.position==="relative"||p.position==="static"){q+=l.offsetTop;r+=l.offsetLeft}if(jQuery.offset.supportsFixedPosition&&p.position==="fixed"){q+=Math.max(k.scrollTop,l.scrollTop);r+=Math.max(k.scrollLeft,l.scrollLeft)}var t=(new b).translate(r,q);e=e.multiply(t);return e}function k(b){var c='<div class="debuglabel" style="left:'+b[0]+"px;top:"+b[1]+'px;"></div>';a("#debug").append(c)}function j(a,b){var c=l(a,b.root);var d=m(c);k(i(d,0,0));k(i(d,0,a.outerHeight()));k(i(d,a.outerWidth(),a.outerHeight()));k(i(d,a.outerWidth(),0))}function i(a,b,c){return[a.a*b+a.c*c+a.e,a.b*b+a.d*c+a.f]}function h(c,d,e){var f=e.targetsize;var g=e.scalemode;var h=e.root;var i=a(h).width();var j=a(h).height();var k=i/c.outerWidth();var l=j/c.outerHeight();var m;if(g=="width"){m=f*k}else if(g=="height"){m=f*l}else if(g=="both"){m=f*Math.min(k,l)}else{console.log("wrong zoommode");return}var n=(i-c.outerWidth()*m)/2;var p=(j-c.outerHeight()*m)/2;var q=i/2;var r=j/2;var s=o(q)+"px "+o(r)+"px";h.css("-ms-transform-origin",s);h.css("-webkit-transform-origin",s);h.css("-o-transform-origin",s);h.css("-moz-transform-origin",s);var t=new b;t=t.translate(-q,-r);t=t.translate(n,p);t=t.scale(m,m);if(d){t=t.multiply(d)}t=t.translate(q,r);return t}function g(b,c){var d=c.root;var e;if(d[0]===document.body){e=a("html")}else{e=d}if(b[0]===d[0]){e.removeClass("noScroll")}else if(!e.hasClass("noScroll")){var f=d.scrollTop();var g=d.scrollLeft();var b=d;if(!f){f=e.scrollTop();g=e.scrollLeft();b=e}e.addClass("noScroll");d.scrollTop(0);d.scrollLeft(0);var h="translate(-"+g+"px,-"+f+"px)";d.css("-ms-transform",h);d.css("-webkit-transform",h);d.css("-moz-transform",h);d.css("-o-transform",h)}}function f(c,d){g(c,d);if(c[0]===d.root[0]){a(d.root).animateTransformation(new b,d,b)}else{var e=l(c,d.root);var f=e?e.inverse():null;var i=h(c,f,d);a(d.root).animateTransformation(i,d,b)}}function e(a){return PureCSSMatrix}function d(){return{targetsize:.9,scalemode:"both",duration:1e3,easing:"ease",root:a(document.body),nativeanimation:false}}"use strict";var b;var c;a.zoomMooz={};a.zoomMooz.setup=function(a){c=jQuery.extend(d(),a);b=e(c)};a.fn.debug=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);if(a("#debug").length===0){a(b.root).append('<div id="debug"><div>')}else{a("#debug").html("")}this.each(function(){if(a(this)[0]!=b.root[0]){j(a(this),b)}})};a.fn.zoomTo=function(b){if(!c){a.zoomMooz.setup()}b=jQuery.extend(c,b);this.each(function(){f(a(this),b)});return this}})(jQuery);(function(a){a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()})};a.touche={};a.touche.traces={};a.touche.addTrace=function(b){a.touche.traces[b.id]=b;return b};a.touche.removeTrace=function(b){delete a.touche.traces[b.id];return b};a.touche.preventDefaults=function(){a("body").bind("touchstart",function(a){a.preventDefault()});a("body").bind("mousedown",function(a){a.preventDefault()})};a.touche.touchStartBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;a("body").trigger("tracestart-"+e.id)}};a.touche.touchMoveBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.x=d.pageX;e.y=d.pageY;e.max_dx=Math.max(d.pageX-e.sx,e.dx);e.max_dy=Math.max(d.pageY-e.sy,e.dy);e.dx=d.pageX-e.sx;e.dy=d.pageY-e.sy;e.currentEvent=b;e.currentTouch=d;a("body").trigger("tracemove-"+e.id)}};a.touche.touchEndBody=function(b){for(var c=0;c<b.originalEvent.changedTouches.length;c++){var d=b.originalEvent.changedTouches[c];var e=a.touche.traces[d.identifier];if(!e)return;e.currentEvent=b;e.currentTouch=d;a("body").trigger("traceend-"+e.id);if(e.max_dx==0&&e.max_dy==0)a("body").trigger("traceclick-"+e.id);a.touche.removeTrace(e)}};a.touche.mouseDownBody=function(b){if(b.button!=0)return;var c=a.touche.traces[-1];if(!c)return;a("body").bind("mousemove",a.touche.mouseMoveBody);a("body").bind("mouseup",a.touche.mouseUpBody);a("body").trigger("tracestart--1")};a.touche.mouseMoveBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.x=b.pageX;c.y=b.pageY;c.max_dx=Math.max(b.pageX-c.sx,c.dx);c.max_dy=Math.max(b.pageY-c.sy,c.dy);c.dx=b.pageX-c.sx;c.dy=b.pageY-c.sy;c.currentEvent=b;c.currentTouch=null;a("body").trigger("tracemove--1")};a.touche.mouseUpBody=function(b){var c=a.touche.traces[-1];if(!c)return;c.currentEvent=b;c.currentTouch=null;a("body").trigger("traceend--1");a.touche.removeTrace(c);if(c.max_dx==0&&c.max_dy==0)a("body").trigger("traceclick--1");a("body").unbind("mousemove",a.touche.mouseMoveBody);a("body").unbind("mouseup",a.touche.mouseUpBody)};a.touche.init=function(){a("body").bind("mousedown",a.touche.mouseDownBody);a("body").bind("touchstart",a.touche.touchStartBody);a("body").bind("touchmove",a.touche.touchMoveBody);a("body").bind("touchend",a.touche.touchEndBody)};a(a.touche.init);a.touche.applyTraceToElement=function(b,c,d){var e=function(){var a=false;for(var e in d.traces){if(d.traces[e].id==b.id){a=true;break}}if(!a){if(d.traces.length)d.after.apply(c,[d]);d.traces.push(b);d.count++}d.start.apply(c,[d,b]);if(!a)d.before.apply(c,[d])};var f=function(){d.move.apply(c,[d,b])};var g=function(){var i=false;for(var j in d.traces){if(d.traces[j].id==b.id){d.after.apply(c,[d]);i=true;var k=d.traces.splice(j,1)[0];d.count--;break}}d.end.apply(c,[d,b]);if(d.traces.length&&i)d.before.apply(c,[d]);a("body").unbind("tracestart-"+b.id,e);a("body").unbind("tracemove-"+b.id,f);a("body").unbind("traceend-"+b.id,g);setTimeout(function(){a("body").unbind("traceclick-"+b.id,h)},0)};var h=function(){d.click.apply(c,[d,b])};a("body").bind("tracestart-"+b.id,e);a("body").bind("tracemove-"+b.id,f);a("body").bind("traceend-"+b.id,g);a("body").bind("traceclick-"+b.id,h)};a.touche.touchStartElement=function(b){var c=a(this);var d=b.data;for(var e=0;e<b.originalEvent.changedTouches.length;e++){var f=b.originalEvent.changedTouches[e];var g=a.touche.traces[f.identifier];if(!g){g={id:f.identifier,sx:f.pageX,sy:f.pageY,x:f.pageX,y:f.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:f,target:b.currentTarget};a.touche.addTrace(g)}else{if(!g.visible)continue}a.touche.applyTraceToElement(g,c,d)}};a.touche.mouseDownElement=function(b){if(b.button!=0)return;var c=a(this);var d=b.data;var e=a.touche.traces[-1];if(!e){e={id:-1,sx:b.pageX,sy:b.pageY,x:b.pageX,y:b.pageY,dx:0,dy:0,max_dx:0,max_dy:0,visible:d.propagate,originalEvent:b,currentEvent:b,currentTouch:null,target:b.currentTarget};a.touche.addTrace(e)}else{if(!e.visible)return}a.touche.applyTraceToElement(e,c,d)};a.fn.touche=function(b){this.each(function(){if(b.clone)b=a.extend(true,{},b)});for(var c in a.touche.options)if(!b[c])b[c]=a.touche.options[c];this.bind("touchstart",b,a.touche.touchStartElement);this.bind("mousedown",b,a.touche.mouseDownElement);return this};a.touche.options={traces:[],count:0,start:a.noop,end:a.noop,click:a.noop,move:a.noop,after:a.noop,before:a.noop,propagate:true,clone:true}})(jQuery);var APP_PATH="/present";var RESERVED_TITLES=["cecily","chrjs-store.js","chrjs.js","jquery.min.js"];(function(a){window.cecily={display:null,bag:null,host:null,store:null,map:null,mapData:null,zooming:false,scale:1,zoomTrace:[],currentTiddler:null,defaultTiddlers:[],defaultWidth:260};cecily.init=function(){cecily.display=a("#display");cecily.store=new tiddlyweb.Store;cecily.store.retrieveCached();cecily.bag=document.location.host.split(".")[0]+"_public";cecily.host=document.location.protocol+"//"+document.location.host;cecily.setMap("MyMap",function(b){if(!b)cecily.mapData={};cecily.loadTiddler("DefaultTiddlers",function(c){var d=0;var e=a(c.render).find("a").each(function(){var c=cecily.tiddlerFromAnchor(a(this));if(!b){cecily.mapData[c]=[d*50+2500,d*50+2500,260,500];d++}if(c){cecily.defaultTiddlers.push(c);cecily.showTiddler(c)}})})});a.touche.preventDefaults();a("#display").touche({loldisplay:true,before:cecily.displayBeforeAction,after:cecily.displayAfterAction,move:cecily.displayMove,click:cecily.displayClick})};a(cecily.init);cecily.displayBeforeAction=function(a){a.cssX=parseFloat(cecily.display.attr("tx"))||0;a.cssY=parseFloat(cecily.display.attr("ty"))||0;if(a.count==1){a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy}if(a.count==2){a.scale=Math.pow(Math.pow(a.traces[0].x-a.traces[1].x,2)+Math.pow(a.traces[0].y-a.traces[1].y,2),.5);a.midpointX=(a.traces[0].x+a.traces[1].x)/2;a.midpointY=(a.traces[0].y+a.traces[1].y)/2}a.tx=a.cssX;a.ty=a.cssY};cecily.displayAfterAction=function(a){cecily.updateDisplayMatrix()};cecily.displayMove=function(b,c){cecily.currentTiddler=null;if(b.count==1){b.tx=b.cssX+c.dx-b.offsetX;b.ty=b.cssY+c.dy-b.offsetY;a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+cecily.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}else if(b.count==2){b.sFactor=Math.pow(Math.pow(b.traces[0].x-b.traces[1].x,2)+Math.pow(b.traces[0].y-b.traces[1].y,2),.5)/b.scale*cecily.scale;var d=(b.traces[0].x+b.traces[1].x)/2;var e=(b.traces[0].y+b.traces[1].y)/2;b.tx=b.cssX+(d-b.midpointX);b.ty=b.cssY+(e-b.midpointY);a("body").css({"-webkit-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-moz-transform":"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")",transform:"translatex("+b.tx+"px) translatey("+b.ty+"px) translateZ(0) scale("+b.sFactor+")","-webkit-transition":"","-moz-transition":"",transition:""})}};cecily.displayClick=function(){cecily.zoomToTiddler(false)};cecily.setMap=function(a,b){cecily.loadTiddler(a,function(c){if(!c){b(false);return}cecily.map=a;cecily.mapData={};var d=c.text.split("\n");for(var e in d){var f=d[e].split(" ");var g=f.shift();cecily.mapData[g]=f}b(true)})};cecily.loadTiddler=function(a,b){var c=new tiddlyweb.Tiddler(a);c.bag=new tiddlyweb.Bag(cecily.bag,cecily.host);cecily.store.get(c,function(a,c,d){if(a){b(a)}else{b(false)}},true)};cecily.showTiddler=function(b,c){c=c||a.noop;if(a("#tiddler"+b).length){c(true);return}cecily.loadTiddler(b,function(d){if(!d){c(false);return}var e=a('<div class="tiddler" id="tiddler'+d.title+'" tiddler="'+d.title+'"></div>');var f=a(".tiddler").length;var g=cecily.mapData[b]?cecily.mapData[b][0]:Math.random()*4700;var h=cecily.mapData[b]?cecily.mapData[b][1]:Math.random()*4e3;var i=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;e.css({"-webkit-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")","-moz-transform":"translatex("+g+"px) translatey("+h+"px) scale("+i+")",transform:"translatex("+g+"px) translatey("+h+"px) scale("+i+")",zIndex:f,display:"none"});e.attr("tx",g);e.attr("ty",h);var j=a('<div class="toolbarLink close" style="float:right">close</div>');j.touche({click:function(){cecily.hideTiddler(b)},stopPropagation:true});var k=a("<h1/>");k.append(d.title);var l=a('<div class="heading"></div>');l.append(j);l.append(k);k.touche({lolwut:true,before:function(a){if(a.count==1){var b=this.parent().parent().attr("tiddler");a.cssX=parseFloat(this.parent().parent().attr("tx"))||0;a.cssY=parseFloat(this.parent().parent().attr("ty"))||0;a.offsetX=a.traces[0].dx;a.offsetY=a.traces[0].dy;a.scale=(cecily.mapData[b]?cecily.mapData[b][2]:cecily.defaultWidth)/cecily.defaultWidth||1;cecily.pushTiddlerToFront(b)}},after:function(a){if(a.count==1){this.parent().parent().attr("tx",a.tx);this.parent().parent().attr("ty",a.ty)}},move:function(a,b){if(a.count==1){a.tx=a.cssX+b.dx/cecily.scale-a.offsetX;a.ty=a.cssY+b.dy/cecily.scale-a.offsetY;this.parent().parent().css({"-webkit-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")","-moz-transform":"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transform:"translatex("+a.tx+"px) translatey("+a.ty+"px) translateZ(0) scale("+a.scale+")",transition:"","-webkit-transition":"","-moz-transition":"",transition:""})}},click:function(){if(e.children(".content:visible").length){e.children(".content").slideUp(200);e.find(".toolbarLink").fadeOut(200)}else{e.children(".content").slideDown(200);e.find(".toolbarLink").fadeIn(200)}},propagate:false});e.append(l);var m=a('<div class="content"></div>');m.append(d.render);e.append(m);m.touche({lolwow:true,click:function(a){cecily.zoomToTiddler(e.attr("tiddler"))},propagate:false});cecily.display.append(e);cecily.makeTiddlerInteractive(b);e.fadeIn(200);setTimeout(function(){e.attr("th",e.height());e.attr("tw",e.width());c(true)})})};cecily.hideTiddler=function(b){var c=a("#tiddler"+b);c.fadeOut(200);setTimeout(function(){c.remove()},200);cecily.assignZOrder()};cecily.pushTiddlerToFront=function(b){var c=a("#tiddler"+b);if(!c.length)return;var d=c.css("z-index");var e=a(".tiddler");e.each(function(){if(a(this).css("z-index")>d)a(this).css("z-index",a(this).css("z-index")-1)});c.css("z-index",e.length)};cecily.assignZOrder=function(){var b,c={};a(".tiddler").each(function(){c[a(this).css("z-index")]=a(this)});var d=[];for(b in c)d.sort();var e=1;for(b in d){c[d[b]].css("z-index",e);e++}};cecily.makeTiddlerInteractive=function(b){var c=a("#tiddler"+b);c.find("a.externalLink").not("cecily").addClass("cecily").touche({click:function(){var a=cecily.tiddlerFromAnchor(this);if(!a)return;cecily.showTiddler(a,function(b){if(b)cecily.zoomToTiddler(a)})},propagate:false}).click(function(a){a.preventDefault()})};cecily.tiddlerFromAnchor=function(a){var b=a.attr("href");if(b.split("/").length==1)return b;if(b.substring(0,cecily.host.length)!=cecily.host)return false;var c=b.substring(cecily.host.length);c=c.split("/");c=c[c.length-1];return c};cecily.zoomToTiddler=function(b){if(cecily.zooming)return;cecily.zooming=true;setTimeout(function(){cecily.updateDisplayMatrix();cecily.zooming=false},1010);if(!b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(a(".tiddler"));c.css(d).css("position","absolute");cecily.display.append(c);c.zoomTo({targetsize:.9,nativeanimation:true,duration:500});setTimeout(function(){c.remove();cecily.zooming=false},500);cecily.currentTiddler=null;return}cecily.zoomTrace.push(b);var e=a("#tiddler"+b);var f=false;if(!e.children(".content:visible").length){f=true;e.children(".content").css("opacity",0).show();e.find(".toolbarLink").fadeIn(200)}if(cecily.currentTiddler&&cecily.currentTiddler!=b){var c=a('<div class="bound"/>');var d=cecily.boundsForTiddlers(e.add("#tiddler"+cecily.currentTiddler));c.css(d).css("position","absolute");a("#display").append(c);c.zoomTo({targetsize:1,duration:500,easing:"ease-out",nativeanimation:true});setTimeout(function(){e.zoomTo({targetsize:.9,duration:500,easing:"ease-in",nativeanimation:true});c.remove()},500)}else{e.zoomTo({targetsize:.9,duration:500,easing:"ease-out",nativeanimation:true})}cecily.currentTiddler=b;if(f)e.children(".content").hide().css("opacity",1).slideDown(200);cecily.pushTiddlerToFront(b)};cecily.updateDisplayMatrix=function(){var b=a("body");var c=b.css("-webkit-transform")||b.css("-moz-transform")||b.css("transform");if(c.substring(0,6)!="matrix"){return}c=c.substring(7);c=c.substring(0,c.length-1);c=c.split(",");cecily.display.attr("tx",parseFloat(c[4]),10);cecily.display.attr("ty",parseFloat(c[5]),10);cecily.scale=parseFloat(c[3],10)};cecily.boundsForTiddlers=function(b){var c=parseFloat(b.eq(0).attr("tx")),d=parseFloat(b.eq(0).attr("ty"));var e=c+parseFloat(b.eq(0).attr("tw")),f=d+parseFloat(b.eq(0).attr("th"));b=b.filter(":gt(0)");b.each(function(){var b=a(this);c=Math.min(b.attr("tx"),c);d=Math.min(b.attr("ty"),d);e=Math.max(parseFloat(b.attr("tx"))+parseFloat(b.attr("tw")),e);f=Math.max(parseFloat(b.attr("ty"))+parseFloat(b.attr("th")),f)});return{left:c,top:d,width:e-c,height:f-d}}})(jQuery)